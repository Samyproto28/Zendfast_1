# Task ID: 32
# Title: Implementar gating de features premium
# Status: pending
# Dependencies: 31
# Priority: low
# Description: Desarrollar sistema para restringir funcionalidades avanzadas a usuarios con suscripción activa
# Details:
Crear SubscriptionManager con checkIsPremium() method. Implementar isPremiumProvider en Riverpod que exponga boolean status. Features premium: custom fasting plans, detailed analytics, meditation library, ad-free experience. Crear PremiumFeatureGate widget que wrappea premium content y muestra upsell si not subscribed. Implementar graceful fallbacks para free users.

# Test Strategy:
Verificar gating funciona correctamente, probar upsell flows, validar fallbacks para free users apropiados

# Subtasks:
## 1. Crear SubscriptionManager y provider de estado premium [pending]
### Dependencies: None
### Description: Implementar el sistema base de gestión de suscripciones con SubscriptionManager y provider Riverpod para verificar estado premium del usuario
### Details:
Crear clase SubscriptionManager con método checkIsPremium() que verifique estado de suscripción actual. Implementar isPremiumProvider en Riverpod que exponga boolean status del estado premium. Configurar lógica de verificación de suscripción activa y gestión de estados de error. Integrar con sistema de autenticación existente para verificar permisos de usuario.

## 2. Desarrollar PremiumFeatureGate widget universal [pending]
### Dependencies: 32.1
### Description: Crear widget reutilizable que envuelva contenido premium y gestione automáticamente la visualización de upsell o contenido según estado de suscripción
### Details:
Implementar PremiumFeatureGate widget que reciba child widget y gestione display condicional. Si usuario no es premium, mostrar pantalla de upsell con call-to-action. Si es premium, mostrar contenido original. Diseñar UI atractiva para upsell con beneficios claramente explicados. Incluir navegación a pantalla de suscripción desde el gate.

## 3. Implementar gating en features premium específicas [pending]
### Dependencies: 32.2
### Description: Aplicar PremiumFeatureGate a todas las funcionalidades premium identificadas y configurar fallbacks apropiados para usuarios gratuitos
### Details:
Integrar PremiumFeatureGate en: custom fasting plans (mostrar solo planes básicos), detailed analytics (limitar métricas mostradas), meditation library (acceso limitado), ad-free experience (mostrar ads apropiadamente). Configurar graceful fallbacks que no rompan experiencia de usuario free. Implementar tracking de eventos cuando usuarios interactúan con gates premium.

