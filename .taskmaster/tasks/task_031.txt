# Task ID: 31
# Title: Configurar Superwall para monetización y paywall
# Status: pending
# Dependencies: 20
# Priority: medium
# Description: Integrar Superwall SDK para presentación de paywall, A/B testing y gestión de suscripciones premium
# Details:
Instalar superwall_flutter SDK. Configurar API keys y experiment IDs. Crear SuperwallService wrapper con métodos: presentPaywall(), checkSubscriptionStatus(), restorePurchases(). Implementar paywall triggers: después onboarding, al acceder premium features. Configurar productos: monthly/yearly subscriptions. Setup webhook endpoint para subscription events. Trackear conversion events para optimization.

# Test Strategy:
Verificar paywall se presenta correctamente, probar purchase flow completo, validar subscription status sync

# Subtasks:
## 1. Integrar SDK de Superwall en Flutter [pending]
### Dependencies: None
### Description: Instalar y configurar el SDK superwall_flutter en el proyecto con las dependencias necesarias
### Details:
Agregar superwall_flutter SDK al pubspec.yaml. Configurar API keys y experiment IDs en la aplicación. Inicializar Superwall en main.dart con las credenciales apropiadas. Configurar permisos necesarios para iOS y Android. Verificar que la inicialización sea exitosa y el SDK esté correctamente integrado.

## 2. Crear SuperwallService wrapper con métodos core [pending]
### Dependencies: 31.1
### Description: Desarrollar servicio wrapper que encapsule la funcionalidad de Superwall con métodos principales
### Details:
Crear clase SuperwallService con métodos presentPaywall(), checkSubscriptionStatus(), restorePurchases(). Implementar manejo de estados de suscripción y respuestas del paywall. Integrar con el sistema de gestión de estado de la aplicación. Manejar errores y casos edge apropiadamente.

## 3. Implementar triggers de paywall y configurar productos [pending]
### Dependencies: 31.2
### Description: Configurar cuándo y cómo se presenta el paywall, y establecer productos de suscripción
### Details:
Implementar triggers para mostrar paywall después del onboarding y al acceder a features premium. Configurar productos de suscripción monthly/yearly en Superwall dashboard. Integrar triggers con la navegación de la app y flujos de usuario. Configurar A/B testing para diferentes presentaciones de paywall.

## 4. Configurar webhooks y tracking de eventos de conversión [pending]
### Dependencies: 31.3
### Description: Establecer endpoint para webhooks de Superwall y implementar tracking de eventos de conversión
### Details:
Setup webhook endpoint en el backend para recibir eventos de subscription de Superwall. Implementar manejo de eventos como subscription_started, subscription_cancelled, subscription_renewed. Configurar tracking de conversion events para optimization del paywall. Integrar con analytics para monitorear performance de conversión.

